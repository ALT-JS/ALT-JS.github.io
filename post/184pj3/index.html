<!DOCTYPE html>
<!-- This site was created with Hugo Blox. https://hugoblox.com -->
<!-- Last Published: May 14, 2025 --><html lang="en-us" >


<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  
  
    <meta name="generator" content="Hugo Blox Builder 5.9.7" />
  

  
  












  
  










  







  
  
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  

  
  
  
    
      
      <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media="print" onload="this.media='all'">
    
  

  
  

  
  
    
    <script src="/js/mathjax-config.js"></script>
  

  

  <link rel="stylesheet" href="/css/vendor-bundle.min.26c458e6907dc03073573976b7f4044e.css" media="print" onload="this.media='all'">

  
  
  
    
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1.9.4/css/academicons.min.css" integrity="sha512-IW0nhlW5MgNydsXJO40En2EoCkTTjZhI3yuODrZIc8cQ4h1XcF53PsqDHa09NqnkXuIe0Oiyyj171BqZFwISBw==" crossorigin="anonymous" media="print" onload="this.media='all'">
    

    
    
    
    
      
      
    
    
    

    
    
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.7.1/dist/leaflet.min.css" integrity="" crossorigin="anonymous" media="print" onload="this.media='all'">
    

    

    
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" integrity="" crossorigin="anonymous" async></script>
      
    
      
      

      
      

      
    
      
      

      
      

      
    
  

  
  
  
  
  
  
  <link rel="stylesheet" href="/css/wowchemy.f6689966c0a10712f95f034011917db0.css" />

  
  
  

  
  
  
  
  
  
  
    
    
    <link rel="stylesheet" href="/css/libs/chroma/github-light.min.css" title="hl-light" media="print" onload="this.media='all'" >
    <link rel="stylesheet" href="/css/libs/chroma/dracula.min.css" title="hl-dark" media="print" onload="this.media='all'" disabled>
  

  
  



























  
  
  






  <meta name="author" content="Jiashen Du" />





  

<meta name="description" content="Part 0: Project overview In this project, I implemented some fundamental functions and features of a physically-based renderer using path tracing algorithm. First, I implemented ray generation and the intersection between ray and objects/scene." />



<link rel="alternate" hreflang="en-us" href="https://alt-js.github.io/post/184pj3/" />
<link rel="canonical" href="https://alt-js.github.io/post/184pj3/" />



  <link rel="manifest" href="/manifest.webmanifest" />



<link rel="icon" type="image/png" href="/media/icon_hu49328279b356d807a3fbed97c60db0cd_36689_32x32_fill_lanczos_center_3.png" />
<link rel="apple-touch-icon" type="image/png" href="/media/icon_hu49328279b356d807a3fbed97c60db0cd_36689_180x180_fill_lanczos_center_3.png" />

<meta name="theme-color" content="#1565c0" />










  
  






<meta property="twitter:card" content="summary" />

  <meta property="twitter:site" content="@GetResearchDev" />
  <meta property="twitter:creator" content="@GetResearchDev" />
<meta property="twitter:image" content="https://alt-js.github.io/media/icon_hu49328279b356d807a3fbed97c60db0cd_36689_512x512_fill_lanczos_center_3.png" />



  

<meta property="og:type" content="article" />
<meta property="og:site_name" content="JiashenDu Homepage" />
<meta property="og:url" content="https://alt-js.github.io/post/184pj3/" />
<meta property="og:title" content="COMPSCI 184 Project3: PathTracer | JiashenDu Homepage" />
<meta property="og:description" content="Part 0: Project overview In this project, I implemented some fundamental functions and features of a physically-based renderer using path tracing algorithm. First, I implemented ray generation and the intersection between ray and objects/scene." /><meta property="og:image" content="https://alt-js.github.io/media/icon_hu49328279b356d807a3fbed97c60db0cd_36689_512x512_fill_lanczos_center_3.png" /><meta property="og:locale" content="en-us" />

  
    <meta
      property="article:published_time"
      content="2025-03-04T00:00:00&#43;00:00"
    />
  
  
    <meta property="article:modified_time" content="2025-03-04T00:00:00&#43;00:00">
  






    






  




<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://alt-js.github.io/post/184pj3/"
  },
  "headline": "COMPSCI 184 Project3: PathTracer",
  
  "datePublished": "2025-03-04T00:00:00Z",
  "dateModified": "2025-03-04T00:00:00Z",
  
  "author": {
    "@type": "Person",
    "name": "Jiashen Du"
  },
  
  "publisher": {
    "@type": "Organization",
    "name": "JiashenDu Homepage",
    "logo": {
      "@type": "ImageObject",
      "url": "https://alt-js.github.io/media/icon_hu49328279b356d807a3fbed97c60db0cd_36689_192x192_fill_lanczos_center_3.png"
    }
  },
  "description": "Part 0: Project overview In this project, I implemented some fundamental functions and features of a physically-based renderer using path tracing algorithm. First, I implemented ray generation and the intersection between ray and objects/scene."
}
</script>

  

  




  
  
  

  
  

  


  
  <title>COMPSCI 184 Project3: PathTracer | JiashenDu Homepage</title>

  
  
  
  











</head>


<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" class="page-wrapper   " data-wc-page-id="17b2ae3a1e133096d9f00282fc867632" >

  
  
  
  
  
  
  
  
  
  <script src="/js/wowchemy-init.min.9e4214442a7711d35691acd58f6f6361.js"></script>

  


<aside class="search-modal" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#" aria-label="Close"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search" class="form-control"
        aria-label="Search...">
        
      </div>

      
      

      

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>



  <div class="page-header header--fixed">
  
  
  
  
  












<header>
  <nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
    <div class="container-xl">

      
      <div class="d-none d-lg-inline-flex">
        <a class="navbar-brand" href="/">JiashenDu Homepage</a>
      </div>
      

      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar-content" aria-controls="navbar-content" aria-expanded="false" aria-label="Toggle navigation">
      <span><i class="fas fa-bars"></i></span>
      </button>
      

      
      <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
        <a class="navbar-brand" href="/">JiashenDu Homepage</a>
      </div>
      

      
      
      <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

        
        <ul class="navbar-nav d-md-inline-flex">
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#about"><span>Home</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#featured"><span>Publications</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#projects"><span>Projects</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#posts"><span>Posts</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#contact"><span>Contact</span></a>
          </li>

          
          

        

          
        </ul>
      </div>

      <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">

        
        
          
            
            <li class="nav-item d-none d-lg-inline-flex">
              <a class="nav-link" href="https://twitter.com/altjasonspeed" data-toggle="tooltip" data-placement="bottom" title="Follow me on Twitter" target="_blank" rel="noopener" aria-label="Follow me on Twitter">
                <i class="fab fa-twitter" aria-hidden="true"></i>
              </a>
            </li>
          
        

        
        
        
        <li class="nav-item">
          <a class="nav-link js-search" href="#" aria-label="Search"><i class="fas fa-search" aria-hidden="true"></i></a>
        </li>
        

        
        
        
        <li class="nav-item dropdown theme-dropdown">
          <a href="#" class="nav-link" data-toggle="dropdown" aria-haspopup="true" aria-label="Display preferences">
            <i class="fas fa-moon" aria-hidden="true"></i>
          </a>
          <div class="dropdown-menu">
            <a href="#" class="dropdown-item js-set-theme-light">
              <span>Light</span>
            </a>
            <a href="#" class="dropdown-item js-set-theme-dark">
              <span>Dark</span>
            </a>
            <a href="#" class="dropdown-item js-set-theme-auto">
              <span>Automatic</span>
            </a>
          </div>
        </li>
        

        
        

      </ul>

    </div>
  </nav>
</header>


  </div>

  <div class="page-body">
    
    
    

    <article class="article">

  













  

  
  
  
<div class="article-container pt-3">
  <h1>COMPSCI 184 Project3: PathTracer</h1>

  
  <p class="page-subtitle">implementations of the core routines of a physically-based renderer using a pathtracing algorithm</p>
  

  
    


<div class="article-metadata">

  
  

  
  <span class="article-date">
    
    
      
    
    Mar 4, 2025
  </span>
  

  

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    6 min read
  </span>
  

  
  
  
  

  
  

</div>

    





  
</div>



  <div class="article-container">

    <div class="article-style">
      <p>















<figure  >
  <div class="d-flex justify-content-center">
    <div class="w-100" ><img src="https://s2.loli.net/2025/03/18/eHbOGFcswjBzxDa.png" alt="dragon_64_32.png" loading="lazy" data-zoomable /></div>
  </div></figure>
</p>
<h2 id="part-0-project-overview">Part 0: Project overview</h2>
<p>In this project, I implemented some fundamental functions and features of a physically-based renderer using path tracing algorithm. First, I implemented ray generation and the intersection between ray and objects/scene. Next, I implemented the BVH splitting and intersection detection. Then, I implemented direct illumination(zero/one bounce lights) and global illumination(multi-bounce lights w/ w/o russian roullete) to actually render the whole scene with path tracing. Finally, I implemented adaptive sampling to reduce the noise of monte carlo path tracing.</p>
<h2 id="part-1-ray-generation-and-scene-intersection">Part 1: Ray Generation and Scene Intersection</h2>
<h3 id="ray-generation-walkthrough--primitive-intersection-pipeline">Ray generation walkthrough &amp; primitive intersection pipeline</h3>
<p>I first calculate the bottom left and the top right corner of the sensor/image space coordinates, which helps me to determine the coordinates in the camera space with left multiplcation of the <code>c2w</code> matrix. Then with the origin <code>pos</code> and the previously calculated coord as <code>direction</code> vector(since the origin is [0,0,0] and it&rsquo;s numerically the same for the coords and the vector), we can generate the correct ray.</p>
<p>Primitive is the bridge between geometry processing and the shading subsystem. It contains all the things including <code>bbox</code>, <code>intersect</code>, <code>has_intersection</code> and <code>bsdf</code>. For intersections, we use <code>has_intersection</code> to determine whether it&rsquo;s intersected or not and use <code>intersect</code> to actually change the intersection distance, the normal vector, and the bsdf.</p>
<h3 id="triangle-intersection-algorithm-walkthrough">Triangle intersection algorithm walkthrough</h3>
<p>For the <code>intersect</code> and <code>has_intersection</code>, I used the Moller-Trumbore algorithm to compute them. We compute two edges of the triangle. Compute the determinant <code>det</code> to check if the ray is nearly parallel. Compute u and v(barycentric coordinates) to ensure the intersection lies within the triangle. Compute t, the intersection distance along the ray. And finally check if t is within the ray&rsquo;s valid range (min_t to max_t). The function <code>intersect</code> basically determine whether <code>has_intersection</code> is true or not and change the primitives and the properties mentioned above(intersection distance, normal vector, bsdf).</p>
<h3 id="some-results">Some results</h3>
<table>
<thead>
<tr>
<th style="text-align:center">















<figure  >
  <div class="d-flex justify-content-center">
    <div class="w-100" ><img src="https://s2.loli.net/2025/03/17/PSxngs9r1DGBQvh.png" alt="1-CBspheres.png" loading="lazy" data-zoomable /></div>
  </div></figure>
</th>
<th style="text-align:center">















<figure  >
  <div class="d-flex justify-content-center">
    <div class="w-100" ><img src="https://s2.loli.net/2025/03/17/ahoUQ67VMJ8Hnm5.png" alt="1-cow.png" loading="lazy" data-zoomable /></div>
  </div></figure>
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">CB spheres</td>
<td style="text-align:center">cow</td>
</tr>
</tbody>
</table>
<h2 id="part-2-bounding-volume-hierarchy">Part 2: Bounding Volume Hierarchy</h2>
<h3 id="bvh-construction-algorithm-walkthrough">BVH construction algorithm walkthrough</h3>
<p>First, compute the bounding box (BBox) of all primitives in the given range [start, end). Then, I choose the best axis to split: compute the bounding box centroid for each primitive. Select the axis with the largest extent (X, Y, or Z) and split at the centroid median to achieve balanced partitions. The primitives are sorted first and partitioned into left and right subsets. Finally, recursively call function and construct BVH for left and right subsets and return the newly created BVHNode.</p>
<h3 id="some-results-1">Some results</h3>
<table>
<thead>
<tr>
<th style="text-align:center">















<figure  >
  <div class="d-flex justify-content-center">
    <div class="w-100" ><img src="https://s2.loli.net/2025/03/17/hsbaMc4D8Z1iKzq.png" alt="2-cblucy.png" loading="lazy" data-zoomable /></div>
  </div></figure>
</th>
<th style="text-align:center">















<figure  >
  <div class="d-flex justify-content-center">
    <div class="w-100" ><img src="https://s2.loli.net/2025/03/17/h2aK4RpOl9yntiw.png" alt="2-max.png" loading="lazy" data-zoomable /></div>
  </div></figure>
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">CB Lucy</td>
<td style="text-align:center">Max Planck</td>
</tr>
</tbody>
</table>
<h3 id="more-on-bvh-acceleration">More on BVH acceleration</h3>
<p>First, here&rsquo;s more result on the BVH rendering(left) and the comparison between the non-BVH. You can see that there&rsquo;s basically no difference between them.</p>
<table>
<thead>
<tr>
<th style="text-align:center">















<figure  >
  <div class="d-flex justify-content-center">
    <div class="w-100" ><img src="https://s2.loli.net/2025/03/17/L7pVYQdUeayEkjW.png" alt="2-peter.png" loading="lazy" data-zoomable /></div>
  </div></figure>
</th>
<th style="text-align:center">















<figure  >
  <div class="d-flex justify-content-center">
    <div class="w-100" ><img src="https://s2.loli.net/2025/03/17/sKw7S8VnQ9bU3k2.png" alt="2slow-peter.png" loading="lazy" data-zoomable /></div>
  </div></figure>
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Peter w/ BVH</td>
<td style="text-align:center">Peter w/o BVH</td>
</tr>
</tbody>
</table>
<p>But the rendering time, as shown in the picture below, have significant difference. One is 0.0653 second, and the other takes 166.5520 seconds to finish. Nearly 300x faster.</p>
<p>















<figure  >
  <div class="d-flex justify-content-center">
    <div class="w-100" ><img src="https://s2.loli.net/2025/03/17/mGnP5FgaLyU4qWM.png" alt="2-peterspeed.png" loading="lazy" data-zoomable /></div>
  </div></figure>
</p>
<h2 id="part-3-direct-illumination">Part 3: Direct Illumination</h2>
<h3 id="direct-lighting-functions-walkthrough">Direct Lighting functions walkthrough</h3>
<h4 id="uniform-hemisphere-sampling">Uniform Hemisphere Sampling</h4>
<p>In the loop of <code>num_sample</code> samples, we sample from <code>hemisphereSampler</code>, then we create a new ray with in point <code>hit_p</code> and the epsilon constant for avoiding numerical presision issues and direction sampled earlier. If the ray intersects we calculate the <code>L_out</code> of the ray. Finally we divide the sum of all the things above with pdf and the <code>num_samples</code>.</p>
<h4 id="importance-sampling-lights">Importance Sampling Lights</h4>
<p>FOr importance sampling, we sample all the lights directly After we calculate the hit point <code>hit_p</code>, we directly sample a light ray from it. If we cast a ray in this direction and there is no other object between the hit point and the light source, then we know that this light source does cast light onto the hit point. After the judge, we still do the same thing as above(divide the sum of all the things above with pdf and the <code>num_samples</code>).</p>
<h3 id="some-results-2">Some results</h3>
<table>
<thead>
<tr>
<th style="text-align:center">















<figure  >
  <div class="d-flex justify-content-center">
    <div class="w-100" ><img src="https://s2.loli.net/2025/03/17/dcW1BYZT6Jpvswl.png" alt="3H-bunny_64_32.png" loading="lazy" data-zoomable /></div>
  </div></figure>
</th>
<th style="text-align:center">















<figure  >
  <div class="d-flex justify-content-center">
    <div class="w-100" ><img src="https://s2.loli.net/2025/03/17/uhZSVJynjMpz6UK.png" alt="3-bunny_64_32.png" loading="lazy" data-zoomable /></div>
  </div></figure>
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Hemisphere uniform sampling</td>
<td style="text-align:center">Direct importance sampling</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:center">















<figure  >
  <div class="d-flex justify-content-center">
    <div class="w-100" ><img src="https://s2.loli.net/2025/03/17/sbQr1iKAhxGZSg7.png" alt="3H-dragon_32_16.png" loading="lazy" data-zoomable /></div>
  </div></figure>
</th>
<th style="text-align:center">















<figure  >
  <div class="d-flex justify-content-center">
    <div class="w-100" ><img src="https://s2.loli.net/2025/03/17/olEq7FRBQMzStYb.png" alt="3-dragon_32_16.png" loading="lazy" data-zoomable /></div>
  </div></figure>
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Hemisphere uniform sampling</td>
<td style="text-align:center">Direct importance sampling</td>
</tr>
</tbody>
</table>
<h3 id="direct-comparison">Direct comparison</h3>
<table>
<thead>
<tr>
<th style="text-align:center">















<figure  >
  <div class="d-flex justify-content-center">
    <div class="w-100" ><img src="https://s2.loli.net/2025/03/17/pd3KXycOaBsR8Eo.png" alt="3-1-bunny_64_32.png" loading="lazy" data-zoomable /></div>
  </div></figure>
</th>
<th style="text-align:center">















<figure  >
  <div class="d-flex justify-content-center">
    <div class="w-100" ><img src="https://s2.loli.net/2025/03/17/ORMdsz56EyBwQFS.png" alt="3-4-bunny_64_32.png" loading="lazy" data-zoomable /></div>
  </div></figure>
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">















<figure  >
  <div class="d-flex justify-content-center">
    <div class="w-100" ><img src="https://s2.loli.net/2025/03/17/wuqkp8aj7XcZ3PR.png" alt="3-16-bunny_64_32.png" loading="lazy" data-zoomable /></div>
  </div></figure>
</td>
<td style="text-align:center">















<figure  >
  <div class="d-flex justify-content-center">
    <div class="w-100" ><img src="https://s2.loli.net/2025/03/17/5exniCTFvOcGjm9.png" alt="3-64-bunny_64_32.png" loading="lazy" data-zoomable /></div>
  </div></figure>
</td>
</tr>
<tr>
<td style="text-align:center">Up 1 Down 16</td>
<td style="text-align:center">Up 4 Down 64</td>
</tr>
</tbody>
</table>
<h3 id="conclusion">Conclusion</h3>
<p>Uniform hemisphere sampling distributes samples evenly over the hemisphere, leading to significant variance in Monte Carlo integration when evaluating lighting contributions, especially in scenes with strong directional lighting. This results in more noise and slower convergence. In contrast, importance sampling strategically places more samples in directions where the light source contributes most to the radiance, reducing variance and improving efficiency. This method converges faster, producing smoother and more accurate results with fewer samples.</p>
<h2 id="part-4-global-illumination">Part 4: Global Illumination</h2>
<h3 id="indirect-lighting-function-walkthough">Indirect lighting function walkthough</h3>
<p>We get the one bounce radiance first, then, we sample a new f using the outgoing direction of the last ray. We create new ray and increase its depth by 1. When the depth reaches the max depth, just return the one bounce result earlier(this is the last one being calculated), otherwise recursively calling the function.</p>
<p>As for russian roulette, the difference is that every new ray generated each turn has to pass the russian roulette coin flip check in order to not be eliminated and thrown away. The probability I&rsquo;m using here is 70% continue, 30% delete each turn.</p>
<h3 id="some-global-illumination-results">Some global illumination results</h3>
<table>
<thead>
<tr>
<th style="text-align:center">















<figure  >
  <div class="d-flex justify-content-center">
    <div class="w-100" ><img src="https://s2.loli.net/2025/03/17/D4Ye7gfVZy5TcUq.png" alt="4-bunny_1024_8_2.png" loading="lazy" data-zoomable /></div>
  </div></figure>
</th>
<th style="text-align:center">















<figure  >
  <div class="d-flex justify-content-center">
    <div class="w-100" ><img src="https://s2.loli.net/2025/03/17/bfBkY6LQGyCnXAZ.png" alt="4-spheres_1024_8_4.png" loading="lazy" data-zoomable /></div>
  </div></figure>
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Bunny (maxdepth=2)</td>
<td style="text-align:center">Spheres (maxdepth=4)</td>
</tr>
</tbody>
</table>
<h3 id="only-direct-illumination-vs-only-indirect-illumination">Only direct illumination vs. only indirect illumination</h3>
<table>
<thead>
<tr>
<th style="text-align:center">















<figure  >
  <div class="d-flex justify-content-center">
    <div class="w-100" ><img src="https://s2.loli.net/2025/03/17/QzaAcpTOljU9CMK.png" alt="4-spheres_1024_8_1.png" loading="lazy" data-zoomable /></div>
  </div></figure>
</th>
<th style="text-align:center">















<figure  >
  <div class="d-flex justify-content-center">
    <div class="w-100" ><img src="https://s2.loli.net/2025/03/18/4fCLUGcaYm8dwqI.png" alt="4-spheres_1024_8_2onlyi.png" loading="lazy" data-zoomable /></div>
  </div></figure>
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">only direct illumination</td>
<td style="text-align:center">only indirect illumination (maxdepth=2)</td>
</tr>
</tbody>
</table>
<h3 id="renders-of-max_ray_depth-from-0-to-5">Renders of <code>max_ray_depth</code> from 0 to 5</h3>
<p>specs using: <code>-t 12 -s 1024 -l 8 -r 480 360</code>, click the image to zoom in on the website.</p>
<table>
<thead>
<tr>
<th>isAccumBounces</th>
<th>m = 0</th>
<th>m = 1</th>
<th>m = 2</th>
<th>m = 3</th>
<th>m = 4</th>
<th>m = 5</th>
</tr>
</thead>
<tbody>
<tr>
<td>false</td>
<td>















<figure  >
  <div class="d-flex justify-content-center">
    <div class="w-100" ><img src="https://s2.loli.net/2025/03/18/cGERHpAguQeCFLI.png" alt="CB_Bunny_0.png" loading="lazy" data-zoomable /></div>
  </div></figure>
</td>
<td>















<figure  >
  <div class="d-flex justify-content-center">
    <div class="w-100" ><img src="https://s2.loli.net/2025/03/18/IYqgA2rjBJsduiV.png" alt="CB_Bunny_1.png" loading="lazy" data-zoomable /></div>
  </div></figure>
</td>
<td>















<figure  >
  <div class="d-flex justify-content-center">
    <div class="w-100" ><img src="https://s2.loli.net/2025/03/18/OnDZbmFq9UihCgL.png" alt="CB_Bunny_2.png" loading="lazy" data-zoomable /></div>
  </div></figure>
</td>
<td>















<figure  >
  <div class="d-flex justify-content-center">
    <div class="w-100" ><img src="https://s2.loli.net/2025/03/18/sqfh6ZUnmKetLET.png" alt="CB_Bunny_3.png" loading="lazy" data-zoomable /></div>
  </div></figure>
</td>
<td>















<figure  >
  <div class="d-flex justify-content-center">
    <div class="w-100" ><img src="https://s2.loli.net/2025/03/18/r1iAbHDxV48nmp3.png" alt="CB_Bunny_4.png" loading="lazy" data-zoomable /></div>
  </div></figure>
</td>
<td>















<figure  >
  <div class="d-flex justify-content-center">
    <div class="w-100" ><img src="https://s2.loli.net/2025/03/18/8X7aYmyHVGTpEQs.png" alt="CB_Bunny_5.png" loading="lazy" data-zoomable /></div>
  </div></figure>
</td>
</tr>
<tr>
<td>true</td>
<td>















<figure  >
  <div class="d-flex justify-content-center">
    <div class="w-100" ><img src="https://s2.loli.net/2025/03/18/bvizX7BDAYJN89T.png" alt="CB_Bunny_cumsum_0.png" loading="lazy" data-zoomable /></div>
  </div></figure>
</td>
<td>















<figure  >
  <div class="d-flex justify-content-center">
    <div class="w-100" ><img src="https://s2.loli.net/2025/03/18/VjzShtWMLb7gIQy.png" alt="CB_Bunny_cumsum_1.png" loading="lazy" data-zoomable /></div>
  </div></figure>
</td>
<td>















<figure  >
  <div class="d-flex justify-content-center">
    <div class="w-100" ><img src="https://s2.loli.net/2025/03/18/3WxsAPvbGEq6HNL.png" alt="CB_Bunny_cumsum_2.png" loading="lazy" data-zoomable /></div>
  </div></figure>
</td>
<td>















<figure  >
  <div class="d-flex justify-content-center">
    <div class="w-100" ><img src="https://s2.loli.net/2025/03/18/LeQf9sqC3vta2hG.png" alt="CB_Bunny_cumsum_3.png" loading="lazy" data-zoomable /></div>
  </div></figure>
</td>
<td>















<figure  >
  <div class="d-flex justify-content-center">
    <div class="w-100" ><img src="https://s2.loli.net/2025/03/18/epknVAIzZwdN2Ly.png" alt="CB_Bunny_cumsum_4.png" loading="lazy" data-zoomable /></div>
  </div></figure>
</td>
<td>















<figure  >
  <div class="d-flex justify-content-center">
    <div class="w-100" ><img src="https://s2.loli.net/2025/03/18/ts5jVlDz1NhGSZF.png" alt="CB_Bunny_cumsum_5.png" loading="lazy" data-zoomable /></div>
  </div></figure>
</td>
</tr>
</tbody>
</table>
<h4 id="the-2nd-and-3rd-bounce-of-light">the 2nd and 3rd bounce of light</h4>
<p>For the 2nd bounce of the light, its main contribution is that it illuminates the ceiling, making the overall rasterization way more realistic. For the third bounce of light, it slightly illuminates the ground around the bunny, mimicing the lights reflected away from the bunny surface, making the overall rasterization more realistic.</p>
<h3 id="russian-roulette-rendering-results">Russian roulette rendering results</h3>
<p>specs using: <code>-s 1024 -l 4</code>. Along with using russian soulette, you may not be able to see that much difference after 2 bounce.</p>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flexbox</title>
    <style>
        .container1 {
            display: flex;
            justify-content: space-between; /* 图片之间有间距 */
            align-items: center;
            gap: 10px; /* 图片间距 */
        }
        .container1 img {
            width: 100px; /* 设定图片宽度 */
            height: auto; /* 保持宽高比 */
        }
    </style>
</head>
<body>
    <div class="container1">
        <img src="https://s2.loli.net/2025/03/18/ter3DLVmPMNxOHU.png" alt="图片1">
        <img src="https://s2.loli.net/2025/03/18/4bXiQIOSD6k2h9G.png" alt="图片2">
        <img src="https://s2.loli.net/2025/03/18/f2LITNAPtaVv6QO.png" alt="图片3">
        <img src="https://s2.loli.net/2025/03/18/y4ZuJkjoRhrLM5e.png" alt="图片4">
        <img src="https://s2.loli.net/2025/03/18/8PTfcBJsKSzVAYa.png" alt="图片5">
        <img src="https://s2.loli.net/2025/03/18/ys6JOa3PBA4E7Zo.png" alt="图片5">
    </div>
</body>
</html>
<h3 id="various-sample-per-pixel-rates-results">Various sample-per-pixel rates results</h3>
<p>From left to right, from top to bottom: 1 2 4 8 16 64 1024.</p>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flexbox</title>
    <style>
        .container2 {
            display: flex;
            justify-content: space-between; /* 图片之间有间距 */
            align-items: center;
            gap: 10px; /* 图片间距 */
        }
        .container2 img {
            width: 150px; /* 设定图片宽度 */
            height: auto; /* 保持宽高比 */
        }
    </style>
</head>
<body>
    <div class="container2">
        <img src="https://s2.loli.net/2025/03/18/fHB89v74NbV1RAe.png" alt="图片1">
        <img src="https://s2.loli.net/2025/03/18/a7iHhyqIOwczQ3C.png" alt="图片2">
        <img src="https://s2.loli.net/2025/03/18/IZNlfs51XEhi8Pe.png" alt="图片3">
        <img src="https://s2.loli.net/2025/03/18/DGeFtJuWlV6I9Sd.png" alt="图片4">
    </div>
</body>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flexbox</title>
    <style>
        .container3 {
            display: flex;
            justify-content: space-between; /* 图片之间有间距 */
            align-items: center;
            gap: 10px; /* 图片间距 */
        }
        .container3 img {
            width: 200px; /* 设定图片宽度 */
            height: auto; /* 保持宽高比 */
        }
    </style>
</head>
<body>
    <div class="container3">
        <img src="https://s2.loli.net/2025/03/18/tdysICTwuG6kzU1.png" alt="图片1">
        <img src="https://s2.loli.net/2025/03/18/gn7KfalOB6sDwiJ.png" alt="图片2">
        <img src="https://s2.loli.net/2025/03/18/nhL8oIT5qeFlKXN.png" alt="图片3">
    </div>
</body>
<h2 id="part-5-adaptive-sampling">Part 5: Adaptive Sampling</h2>
<h3 id="adaptive-sampling-walkthrough">Adaptive sampling walkthrough</h3>
<p>Adaptive sampling is a method used in ray tracing to reduce the number of samples per pixel while maintaining image quality. Instead of taking a fixed number of samples (ns_aa), it dynamically decides when to stop sampling based on statistical analysis.</p>
<p>(If only one sample is requested, the algorithm traces a single ray and directly stores the computed radiance.) We loop over <code>ns_aa</code> samples, and only check after every <code>samplesPerBatch</code> samples. Then we calculate and check confidence interval <code>I</code> is smaller or larger than a threshold, if smaller then it stops early. otherwise just like ordinary calculation. Once sampling is complete (either because the pixel converged or the maximum samples were taken), the final radiance is computed as the average of all collected samples.</p>
<h3 id="some-results-3">Some results</h3>
<table>
<thead>
<tr>
<th style="text-align:center">















<figure  >
  <div class="d-flex justify-content-center">
    <div class="w-100" ><img src="https://s2.loli.net/2025/03/18/SIEatGOiRCykVZY.png" alt="5-bunny.png" loading="lazy" data-zoomable /></div>
  </div></figure>
</th>
<th style="text-align:center">















<figure  >
  <div class="d-flex justify-content-center">
    <div class="w-100" ><img src="https://s2.loli.net/2025/03/18/Jy58qPUbscnmpvN.png" alt="5-bunnyrate.png" loading="lazy" data-zoomable /></div>
  </div></figure>
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">bunny</td>
<td style="text-align:center">bunnyrate</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:center">















<figure  >
  <div class="d-flex justify-content-center">
    <div class="w-100" ><img src="https://s2.loli.net/2025/03/18/hwvjBs8Wyx4Dk2G.png" alt="5-ball.png" loading="lazy" data-zoomable /></div>
  </div></figure>
</th>
<th style="text-align:center">















<figure  >
  <div class="d-flex justify-content-center">
    <div class="w-100" ><img src="https://s2.loli.net/2025/03/18/3SGViozB81c6rlH.png" alt="5-ballrate.png" loading="lazy" data-zoomable /></div>
  </div></figure>
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">ball</td>
<td style="text-align:center">ballrate</td>
</tr>
</tbody>
</table>

    </div>

    







<div class="share-box">
  <ul class="share">
    
      
      
      
        
      
      
      
      
      
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Falt-js.github.io%2Fpost%2F184pj3%2F&amp;text=COMPSCI&#43;184&#43;Project3%3A&#43;PathTracer" target="_blank" rel="noopener" class="share-btn-twitter" aria-label="twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      
      
      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=https%3A%2F%2Falt-js.github.io%2Fpost%2F184pj3%2F&amp;t=COMPSCI&#43;184&#43;Project3%3A&#43;PathTracer" target="_blank" rel="noopener" class="share-btn-facebook" aria-label="facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      
      
      
      
        
      
      <li>
        <a href="mailto:?subject=COMPSCI%20184%20Project3%3A%20PathTracer&amp;body=https%3A%2F%2Falt-js.github.io%2Fpost%2F184pj3%2F" target="_blank" rel="noopener" class="share-btn-email" aria-label="envelope">
          <i class="fas fa-envelope"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=https%3A%2F%2Falt-js.github.io%2Fpost%2F184pj3%2F&amp;title=COMPSCI&#43;184&#43;Project3%3A&#43;PathTracer" target="_blank" rel="noopener" class="share-btn-linkedin" aria-label="linkedin-in">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      
      
      
      
      <li>
        <a href="whatsapp://send?text=COMPSCI&#43;184&#43;Project3%3A&#43;PathTracer%20https%3A%2F%2Falt-js.github.io%2Fpost%2F184pj3%2F" target="_blank" rel="noopener" class="share-btn-whatsapp" aria-label="whatsapp">
          <i class="fab fa-whatsapp"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      
      
      
      
      <li>
        <a href="https://service.weibo.com/share/share.php?url=https%3A%2F%2Falt-js.github.io%2Fpost%2F184pj3%2F&amp;title=COMPSCI&#43;184&#43;Project3%3A&#43;PathTracer" target="_blank" rel="noopener" class="share-btn-weibo" aria-label="weibo">
          <i class="fab fa-weibo"></i>
        </a>
      </li>
    
  </ul>
</div>











  
  



  
  
  
    
  
  
  
  <div class="media author-card content-widget-hr">
    
      
      <a href="https://alt-js.github.io/"><img class="avatar mr-3 avatar-circle" src="/authors/admin/avatar_hu85b2d0173a5493a6c7ab40679450830b_353166_270x270_fill_q75_lanczos_center.jpg" alt="Jiashen Du"></a>
    

    <div class="media-body">
      <h5 class="card-title"><a href="https://alt-js.github.io/">Jiashen Du</a></h5>
      <h6 class="card-subtitle">Undergrad Student major in CS</h6>
      <p class="card-text">My research interests include Artificial Intelligence, Deep Learning, Computer Vision and LLMs.</p>
      <ul class="network-icon" aria-hidden="true">
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="/#contact" >
        <i class="fas fa-envelope"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://twitter.com/altjasonspeed" target="_blank" rel="noopener">
        <i class="fab fa-twitter"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://github.com/ALT-JS" target="_blank" rel="noopener">
        <i class="fab fa-github"></i>
      </a>
    </li>
  
    
    
    
    
    
    
    
      
    
    <li>
      <a href="/uploads/resume.pdf" >
        <i class="ai ai-cv"></i>
      </a>
    </li>
  
</ul>

    </div>
  </div>


















  </div>
</article>
  </div>

  <div class="page-footer">
    
    
    <div class="container">
      <footer class="site-footer">

  












  
  
  
  
  













  
  
  

  
  
    
  
  
    
  

  

  
  <p class="powered-by copyright-license-text">
    © 2025 Me. This work is licensed under <a href="https://creativecommons.org/licenses/by-nc-nd/4.0" rel="noopener noreferrer" target="_blank">CC BY NC ND 4.0</a>
  </p>
  

  <p class="powered-by footer-license-icons">
    <a href="https://creativecommons.org/licenses/by-nc-nd/4.0" rel="noopener noreferrer" target="_blank" aria-label="Creative Commons">
      <i class="fab fa-creative-commons fa-2x" aria-hidden="true"></i>
      <i class="fab fa-creative-commons-by fa-2x" aria-hidden="true"></i>
      
        <i class="fab fa-creative-commons-nc fa-2x" aria-hidden="true"></i>
      
      
        <i class="fab fa-creative-commons-nd fa-2x" aria-hidden="true"></i>
      
    </a>
  </p>





  <p class="powered-by">
    
    
    
      
      
      
      
      
      
      Published with <a href="https://hugoblox.com/?utm_campaign=poweredby" target="_blank" rel="noopener">Hugo Blox Builder</a> — the free, <a href="https://github.com/HugoBlox/hugo-blox-builder" target="_blank" rel="noopener">open source</a> website builder that empowers creators.
    
  </p>
</footer>

    </div>
    
  </div>

  


<script src="/js/vendor-bundle.min.938a3a7554cd9f6602290411f64d2617.js"></script>




  

  
  

  






  <script src="https://cdn.jsdelivr.net/npm/leaflet@1.7.1/dist/leaflet.min.js" integrity="" crossorigin="anonymous"></script>








  
  <script id="search-hit-fuse-template" type="text/x-template">
    <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
    </div>
  </script>
  
    <script src="https://cdn.jsdelivr.net/gh/krisk/Fuse@v3.2.1/dist/fuse.min.js" integrity="sha512-o38bmzBGX+hD3JHWUFCDA09btWaqrNmoJ3RXLlrysA7PP01Kgs4UlE4MhelE1v5dJR3+cxlR4qQlotsW7jKsnw==" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/gh/julmot/mark.js@8.11.1/dist/jquery.mark.min.js" integrity="sha512-mhbv5DqBMgrWL+32MmsDOt/OAvqr/cHimk6B8y/bx/xS88MVkYGPiVv2ixKVrkywF2qHplNRUvFsAHUdxZ3Krg==" crossorigin="anonymous"></script>
  












  
  
  
  
  
  
  

















<script id="page-data" type="application/json">{"use_headroom":true}</script>


  <script src="/js/wowchemy-headroom.db4755770454eb63685f8de785c0a172.js" type="module"></script>









  
  


<script src="/en/js/wowchemy.min.caa0dacbea0f9b8c446bff7a0438f4c8.js"></script>



  <script src="/js/wowchemy-map.a26e9d2f7238ba5b868384f1c5bc6477.js" type="module"></script>




  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        
        <pre><code></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>


  <script src="/js/wowchemy-publication.9137013a66774049159934c29c3f0205.js" type="module"></script>


















</body>
</html>
